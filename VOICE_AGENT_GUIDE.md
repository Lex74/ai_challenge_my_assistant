# Руководство по использованию голосового агента

## Быстрый старт

### 1. Установка зависимостей

```bash
pip install -r requirements.txt
```

**Важно для macOS:**
```bash
brew install portaudio
pip install pyaudio
```

### 2. Запуск Ollama

Убедитесь, что Ollama запущен:
```bash
ollama serve
```

### 3. Использование голосового агента

#### Интерактивный голосовой режим
```bash
python voice_agent.py
```

Говорите в микрофон, команда будет распознана и отправлена в LLM.

#### Тестирование на стандартных запросах
```bash
python voice_agent.py --test
```

Это запустит тестирование на запросах:
- "посчитай 25 умножить на 17"
- "дай определение искусственного интеллекта"
- "скажи анекдот"

#### Быстрое тестирование без микрофона
```bash
python test_voice_agent.py
```

Этот скрипт имитирует распознанную речь и сразу отправляет запросы в LLM (полезно для быстрого тестирования без микрофона).

## Как это работает

1. **Голосовая команда** → Микрофон записывает аудио
2. **Распознавание речи** → Google Speech Recognition API преобразует аудио в текст
3. **Отправка в LLM** → Текст отправляется в Ollama модель через Personal Agent
4. **Ответ** → LLM генерирует ответ, который выводится в терминале

## Требования

- Python 3.9+
- Микрофон (для голосового режима)
- Интернет-соединение (для Google Speech Recognition API)
- Запущенный Ollama сервер
- Установленная модель (например, `qwen2.5:7b`)

## Устранение проблем

### Ошибка "Не удалось получить доступ к микрофону"
- Проверьте разрешения на доступ к микрофону в настройках системы
- Убедитесь, что микрофон подключен и работает

### Ошибка "Ошибка сервиса распознавания"
- Проверьте интернет-соединение
- Google Speech Recognition API требует интернет

### Ошибка при установке pyaudio
- На macOS: `brew install portaudio` затем `pip install pyaudio`
- На Linux: установите `portaudio19-dev` через пакетный менеджер

## Примеры использования

```bash
# С указанием модели
python voice_agent.py -m qwen2.5:7b

# Тестирование с кастомными запросами
python voice_agent.py --test --queries "посчитай 2+2" "что такое Python"

# С другим языком распознавания
python voice_agent.py --language en-US
```
